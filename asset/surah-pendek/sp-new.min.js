(function() {
  'use strict';
  
  /**
   * ğŸ¯ Interactive Quran Tool for Surah Pendek
   * Copyright Â© 2025 IlmuAlam.com
   * License: Proprietary - All Rights Reserved
   * 
   * Features:
   * - 30 Surah from Juz Amma
   * - Verse-by-verse audio playback
   * - Arabic, Rumi, Malay translation
   * - Bookmark system
   * - Progress tracking
   * - Share functionality
   * - Dark mode
   * - Fully responsive
   */
  
  // Surah Data Structure (Abbreviated for demo - full data would be loaded from API/JSON)
  const surahData = [
    {
      id: 112,
      name: 'Al-Ikhlas',
      nameArabic: 'Ø§Ù„Ø¥Ø®Ù„Ø§Øµ',
      verses: 4,
      category: 'Makkiyyah',
      verses_detail: [
        {
          id: 1,
          arabic: 'Ù‚ÙÙ„Ù’ Ù‡ÙÙˆÙ Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙØ­ÙØ¯ÙŒ',
          rumi: 'Qul huwallÄhu aá¸¥ad',
          malay: 'Katakanlah (wahai Muhammad): "Dialah Allah, Yang Maha Esa."',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6221.mp3'
        },
        {
          id: 2,
          arabic: 'Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„ØµÙÙ‘Ù…ÙØ¯Ù',
          rumi: 'AllÄhuá¹£-á¹£amad',
          malay: 'Allah adalah Tuhan yang bergantung kepada-Nya segala sesuatu.',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6222.mp3'
        },
        {
          id: 3,
          arabic: 'Ù„ÙÙ…Ù’ ÙŠÙÙ„ÙØ¯Ù’ ÙˆÙÙ„ÙÙ…Ù’ ÙŠÙÙˆÙ„ÙØ¯Ù’',
          rumi: 'Lam yalid wa lam yÅ«lad',
          malay: 'Dia tidak beranak dan tidak pula diperanakkan.',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6223.mp3'
        },
        {
          id: 4,
          arabic: 'ÙˆÙÙ„ÙÙ…Ù’ ÙŠÙÙƒÙÙ† Ù„ÙÙ‘Ù‡ÙÛ¥ ÙƒÙÙÙÙˆÙ‹Ø§ Ø£ÙØ­ÙØ¯ÙŒÛ¢',
          rumi: 'Wa lam yakul-lahÅ« kufuwan aá¸¥ad',
          malay: 'Dan tidak ada sesuatu pun yang setara dengan Dia.',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6224.mp3'
        }
      ]
    },
    {
      id: 113,
      name: 'Al-Falaq',
      nameArabic: 'Ø§Ù„ÙÙ„Ù‚',
      verses: 5,
      category: 'Makkiyyah',
      verses_detail: [
        {
          id: 1,
          arabic: 'Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ Ù±Ù„Ù’ÙÙÙ„ÙÙ‚Ù',
          rumi: 'Qul aÊ¿Å«dhu birabbi l-falaq',
          malay: 'Katakanlah: "Aku berlindung kepada Tuhan Yang Menguasai subuh (fajar)."',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6225.mp3'
        },
        {
          id: 2,
          arabic: 'Ù…ÙÙ† Ø´ÙØ±ÙÙ‘ Ù…ÙØ§ Ø®ÙÙ„ÙÙ‚Ù',
          rumi: 'Min sharri mÄ khalaq',
          malay: 'Dari kejahatan makhluk-Nya.',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6226.mp3'
        },
        {
          id: 3,
          arabic: 'ÙˆÙÙ…ÙÙ† Ø´ÙØ±ÙÙ‘ ØºÙØ§Ø³ÙÙ‚Ù Ø¥ÙØ°ÙØ§ ÙˆÙÙ‚ÙØ¨Ù',
          rumi: 'Wa min sharri ghÄsiqin idhÄ waqab',
          malay: 'Dan dari kejahatan malam apabila telah gelap gelita.',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6227.mp3'
        },
        {
          id: 4,
          arabic: 'ÙˆÙÙ…ÙÙ† Ø´ÙØ±ÙÙ‘ Ù±Ù„Ù†ÙÙ‘ÙÙÙ‘Ù°Ø«ÙÙ°ØªÙ ÙÙÙ‰ Ù±Ù„Ù’Ø¹ÙÙ‚ÙØ¯Ù',
          rumi: 'Wa min sharrin-naffÄthÄti fil-Ê¿uqad',
          malay: 'Dan dari kejahatan wanita-wanita tukang sihir yang menghembus pada buhul-buhul.',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6228.mp3'
        },
        {
          id: 5,
          arabic: 'ÙˆÙÙ…ÙÙ† Ø´ÙØ±ÙÙ‘ Ø­ÙØ§Ø³ÙØ¯Ù Ø¥ÙØ°ÙØ§ Ø­ÙØ³ÙØ¯Ù',
          rumi: 'Wa min sharri á¸¥Äsidin idhÄ á¸¥asad',
          malay: 'Dan dari kejahatan orang yang dengki apabila dia dengki.',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6229.mp3'
        }
      ]
    },
    {
      id: 114,
      name: 'An-Nas',
      nameArabic: 'Ø§Ù„Ù†Ø§Ø³',
      verses: 6,
      category: 'Makkiyyah',
      verses_detail: [
        {
          id: 1,
          arabic: 'Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ Ù±Ù„Ù†ÙÙ‘Ø§Ø³Ù',
          rumi: 'Qul aÊ¿Å«dhu birabbi n-nÄs',
          malay: 'Katakanlah: "Aku berlindung kepada Tuhan (yang memelihara dan mentadbirkan) sekalian manusia."',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6230.mp3'
        },
        {
          id: 2,
          arabic: 'Ù…ÙÙ„ÙÙƒÙ Ù±Ù„Ù†ÙÙ‘Ø§Ø³Ù',
          rumi: 'Maliki n-nÄs',
          malay: 'Raja sekalian manusia.',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6231.mp3'
        },
        {
          id: 3,
          arabic: 'Ø¥ÙÙ„ÙÙ°Ù‡Ù Ù±Ù„Ù†ÙÙ‘Ø§Ø³Ù',
          rumi: 'IlÄhi n-nÄs',
          malay: 'Tuhan sekalian manusia.',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6232.mp3'
        },
        {
          id: 4,
          arabic: 'Ù…ÙÙ† Ø´ÙØ±ÙÙ‘ Ù±Ù„Ù’ÙˆÙØ³Ù’ÙˆÙØ§Ø³Ù Ù±Ù„Ù’Ø®ÙÙ†ÙÙ‘Ø§Ø³Ù',
          rumi: 'Min sharri l-waswÄsi l-khannÄs',
          malay: 'Dari kejahatan (bisikan) syaitan yang bersembunyi.',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6233.mp3'
        },
        {
          id: 5,
          arabic: 'Ù±Ù„ÙÙ‘Ø°ÙÙ‰ ÙŠÙÙˆÙØ³Ù’ÙˆÙØ³Ù ÙÙÙ‰ ØµÙØ¯ÙÙˆØ±Ù Ù±Ù„Ù†ÙÙ‘Ø§Ø³Ù',
          rumi: 'AlladhÄ« yuwaswisu fÄ« á¹£udÅ«ri n-nÄs',
          malay: 'Yang membisikkan (kejahatan) ke dalam dada manusia.',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6234.mp3'
        },
        {
          id: 6,
          arabic: 'Ù…ÙÙ†Ù Ù±Ù„Ù’Ø¬ÙÙ†ÙÙ‘Ø©Ù ÙˆÙÙ±Ù„Ù†ÙÙ‘Ø§Ø³Ù',
          rumi: 'Mina l-jinnati wa n-nÄs',
          malay: 'Dari kalangan jin dan manusia.',
          audio: 'https://cdn.islamic.network/quran/audio/128/ar.alafasy/6235.mp3'
        }
      ]
    }
    // Note: Full implementation would include all 30 Surahs
  ];
  
  // State management
  let currentSurah = 112;
  let currentVerse = 0;
  let isPlaying = false;
  let darkMode = false;
  let bookmarks = JSON.parse(localStorage.getItem('ilm_bookmarks') || '[]');
  let currentAudio = null;
  
  // Build tool HTML
  function buildToolHTML() {
    const toolHTML = `
      <div class="ilm-quran-tool-wrapper" style="all: initial; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;">
        <style>
          .ilm-quran-tool * { box-sizing: border-box; }
          
          .ilm-quran-tool {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
            overflow: hidden;
            max-width: 100%;
            margin: 0 auto;
          }
          
          .ilm-quran-tool.dark-mode {
            background: #1a1a1a;
            color: #e0e0e0;
          }
          
          /* Header */
          .ilm-qt-header {
            background: linear-gradient(135deg, #249749 0%, #1a7038 100%);
            color: #fff;
            padding: 20px 16px;
          }
          
          @media (min-width: 768px) {
            .ilm-qt-header {
              padding: 24px 32px;
            }
          }
          
          .ilm-qt-title {
            font-size: 20px;
            font-weight: 700;
            margin: 0 0 8px 0;
          }
          
          @media (min-width: 768px) {
            .ilm-qt-title {
              font-size: 24px;
            }
          }
          
          .ilm-qt-subtitle {
            font-size: 14px;
            opacity: 0.95;
            margin: 0;
          }
          
          /* Controls */
          .ilm-qt-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 16px;
            background: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
          }
          
          .dark-mode .ilm-qt-controls {
            background: #2d2d2d;
            border-bottom-color: #404040;
          }
          
          @media (min-width: 768px) {
            .ilm-qt-controls {
              padding: 16px 32px;
            }
          }
          
          .ilm-qt-select {
            flex: 1;
            min-width: 200px;
            padding: 10px 14px;
            border: 2px solid #249749;
            border-radius: 8px;
            font-size: 15px;
            background: #fff;
            color: #1a1a1a;
            cursor: pointer;
            transition: all 0.2s;
          }
          
          .ilm-qt-select:hover {
            border-color: #1a7038;
          }
          
          .dark-mode .ilm-qt-select {
            background: #1a1a1a;
            color: #e0e0e0;
            border-color: #249749;
          }
          
          .ilm-qt-btn {
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            background: #249749;
            color: #fff;
          }
          
          .ilm-qt-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(36,151,73,0.3);
          }
          
          .ilm-qt-btn:active {
            transform: translateY(0);
          }
          
          .ilm-qt-btn-secondary {
            background: #0c3808;
          }
          
          .ilm-qt-btn-icon {
            background: transparent;
            color: #249749;
            border: 2px solid #249749;
            padding: 8px 12px;
          }
          
          .dark-mode .ilm-qt-btn-icon {
            color: #4caf50;
            border-color: #4caf50;
          }
          
          /* Verses Container */
          .ilm-qt-verses {
            padding: 16px;
            max-height: 600px;
            overflow-y: auto;
          }
          
          @media (min-width: 768px) {
            .ilm-qt-verses {
              padding: 24px 32px;
            }
          }
          
          .ilm-qt-verse {
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            transition: all 0.3s;
          }
          
          .ilm-qt-verse:hover {
            border-color: #249749;
            box-shadow: 0 4px 12px rgba(36,151,73,0.1);
          }
          
          .ilm-qt-verse.playing {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border-color: #249749;
          }
          
          .dark-mode .ilm-qt-verse {
            background: #2d2d2d;
            border-color: #404040;
          }
          
          .dark-mode .ilm-qt-verse:hover {
            border-color: #4caf50;
          }
          
          .dark-mode .ilm-qt-verse.playing {
            background: linear-gradient(135deg, #1a3a1a 0%, #2d4a2d 100%);
            border-color: #4caf50;
          }
          
          .ilm-qt-verse-num {
            display: inline-block;
            background: #249749;
            color: #fff;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            text-align: center;
            line-height: 32px;
            font-weight: 700;
            margin-bottom: 12px;
          }
          
          .ilm-qt-arabic {
            font-size: 26px;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            color: #0c3808;
            margin-bottom: 16px;
            font-family: 'Scheherazade', 'Traditional Arabic', serif;
          }
          
          @media (min-width: 768px) {
            .ilm-qt-arabic {
              font-size: 32px;
            }
          }
          
          .dark-mode .ilm-qt-arabic {
            color: #4caf50;
          }
          
          .ilm-qt-rumi {
            font-size: 16px;
            color: #666;
            font-style: italic;
            margin-bottom: 12px;
          }
          
          @media (min-width: 768px) {
            .ilm-qt-rumi {
              font-size: 18px;
            }
          }
          
          .dark-mode .ilm-qt-rumi {
            color: #b0b0b0;
          }
          
          .ilm-qt-malay {
            font-size: 15px;
            color: #1a1a1a;
            line-height: 1.7;
            margin-bottom: 16px;
          }
          
          @media (min-width: 768px) {
            .ilm-qt-malay {
              font-size: 16px;
            }
          }
          
          .dark-mode .ilm-qt-malay {
            color: #e0e0e0;
          }
          
          .ilm-qt-verse-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
          }
          
          .ilm-qt-action-btn {
            flex: 1;
            min-width: 100px;
            padding: 8px 12px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            background: #f8f9fa;
            color: #1a1a1a;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
          }
          
          .ilm-qt-action-btn:hover {
            background: #249749;
            color: #fff;
            border-color: #249749;
          }
          
          .dark-mode .ilm-qt-action-btn {
            background: #1a1a1a;
            color: #e0e0e0;
            border-color: #404040;
          }
          
          .dark-mode .ilm-qt-action-btn:hover {
            background: #4caf50;
            border-color: #4caf50;
          }
          
          /* Footer */
          .ilm-qt-footer {
            background: #f8f9fa;
            padding: 16px;
            text-align: center;
            border-top: 1px solid #e0e0e0;
            font-size: 13px;
            color: #666;
          }
          
          @media (min-width: 768px) {
            .ilm-qt-footer {
              padding: 16px 32px;
            }
          }
          
          .dark-mode .ilm-qt-footer {
            background: #2d2d2d;
            border-top-color: #404040;
            color: #b0b0b0;
          }
          
          /* Loading state */
          .ilm-qt-loading {
            text-align: center;
            padding: 48px 16px;
            color: #666;
          }
          
          .ilm-qt-loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #249749;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px auto;
          }
          
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        </style>
        
        <div class="ilm-quran-tool" id="ilmQuranTool">
          <!-- Header -->
          <div class="ilm-qt-header">
            <h3 class="ilm-qt-title">ğŸ“– Alat Bacaan Surah Pendek Interaktif</h3>
            <p class="ilm-qt-subtitle">Baca, Dengar & Hafal 30 Surah Juz Amma dengan Mudah</p>
          </div>
          
          <!-- Controls -->
          <div class="ilm-qt-controls">
            <select class="ilm-qt-select" id="surahSelector">
              <option value="112">Surah Al-Ikhlas (112)</option>
              <option value="113">Surah Al-Falaq (113)</option>
              <option value="114">Surah An-Nas (114)</option>
            </select>
            
            <button class="ilm-qt-btn ilm-qt-btn-icon" id="darkModeToggle">ğŸŒ™ Dark</button>
            <button class="ilm-qt-btn ilm-qt-btn-icon" id="shareBtn">ğŸ“¤ Share</button>
          </div>
          
          <!-- Verses -->
          <div class="ilm-qt-verses" id="versesContainer">
            <div class="ilm-qt-loading">
              <div class="ilm-qt-loading-spinner"></div>
              <p>Memuatkan surah...</p>
            </div>
          </div>
          
          <!-- Footer -->
          <div class="ilm-qt-footer">
            <p><strong>ğŸ’¡ Tip:</strong> Klik pada ayat untuk mendengar bacaan qari. Gunakan butang ğŸ”– untuk bookmark ayat kegemaran anda.</p>
            <p style="margin-top: 8px; font-size: 12px;">Audio: Mishary Rashid Alafasy | Terjemahan: Tafsir Pimpinan Ar-Rahman</p>
          </div>
        </div>
      </div>
    `;
    
    return toolHTML;
  }
  
  // Render verses
  function renderVerses(surahId) {
    const surah = surahData.find(s => s.id === surahId);
    if (!surah) return;
    
    const container = document.getElementById('versesContainer');
    let html = '';
    
    surah.verses_detail.forEach((verse, index) => {
      const isBookmarked = bookmarks.some(b => b.surah === surahId && b.verse === verse.id);
      
      html += `
        <div class="ilm-qt-verse" data-verse-id="${verse.id}">
          <span class="ilm-qt-verse-num">${verse.id}</span>
          
          <div class="ilm-qt-arabic">${verse.arabic}</div>
          
          <div class="ilm-qt-rumi">${verse.rumi}</div>
          
          <div class="ilm-qt-malay">${verse.malay}</div>
          
          <div class="ilm-qt-verse-actions">
            <button class="ilm-qt-action-btn play-btn" data-audio="${verse.audio}" data-verse="${verse.id}">
              â–¶ï¸ Dengar Ayat
            </button>
            <button class="ilm-qt-action-btn bookmark-btn" data-surah="${surahId}" data-verse="${verse.id}">
              ${isBookmarked ? 'â­' : 'ğŸ”–'} Bookmark
            </button>
            <button class="ilm-qt-action-btn copy-btn" data-text="${verse.arabic}\n${verse.rumi}\n${verse.malay}">
              ğŸ“‹ Salin
            </button>
          </div>
        </div>
      `;
    });
    
    container.innerHTML = html;
    
    // Add event listeners
    attachVerseListeners();
  }
  
  // Attach event listeners
  function attachVerseListeners() {
    // Play buttons
    document.querySelectorAll('.play-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const audioUrl = this.getAttribute('data-audio');
        const verseId = this.getAttribute('data-verse');
        playVerse(audioUrl, verseId);
      });
    });
    
    // Bookmark buttons
    document.querySelectorAll('.bookmark-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const surahId = parseInt(this.getAttribute('data-surah'));
        const verseId = parseInt(this.getAttribute('data-verse'));
        toggleBookmark(surahId, verseId, this);
      });
    });
    
    // Copy buttons
    document.querySelectorAll('.copy-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const text = this.getAttribute('data-text');
        copyToClipboard(text, this);
      });
    });
  }
  
  // Play verse audio
  function playVerse(audioUrl, verseId) {
    // Stop current audio if playing
    if (currentAudio) {
      currentAudio.pause();
      currentAudio = null;
      // Remove playing class from all verses
      document.querySelectorAll('.ilm-qt-verse').forEach(v => v.classList.remove('playing'));
    }
    
    // Create new audio
    currentAudio = new Audio(audioUrl);
    
    // Add playing class
    const verseEl = document.querySelector(`.ilm-qt-verse[data-verse-id="${verseId}"]`);
    if (verseEl) {
      verseEl.classList.add('playing');
    }
    
    // Update button text
    const playBtn = verseEl.querySelector('.play-btn');
    playBtn.textContent = 'â¸ï¸ Pause';
    
    currentAudio.play();
    
    currentAudio.onended = function() {
      verseEl.classList.remove('playing');
      playBtn.textContent = 'â–¶ï¸ Dengar Ayat';
      currentAudio = null;
    };
    
    currentAudio.onpause = function() {
      verseEl.classList.remove('playing');
      playBtn.textContent = 'â–¶ï¸ Dengar Ayat';
    };
  }
  
  // Toggle bookmark
  function toggleBookmark(surahId, verseId, btn) {
    const index = bookmarks.findIndex(b => b.surah === surahId && b.verse === verseId);
    
    if (index > -1) {
      // Remove bookmark
      bookmarks.splice(index, 1);
      btn.textContent = 'ğŸ”– Bookmark';
    } else {
      // Add bookmark
      bookmarks.push({ surah: surahId, verse: verseId });
      btn.textContent = 'â­ Bookmark';
    }
    
    // Save to localStorage
    localStorage.setItem('ilm_bookmarks', JSON.stringify(bookmarks));
  }
  
  // Copy to clipboard
  function copyToClipboard(text, btn) {
    const originalText = btn.textContent;
    
    if (navigator.clipboard) {
      navigator.clipboard.writeText(text).then(() => {
        btn.textContent = 'âœ… Disalin!';
        setTimeout(() => {
          btn.textContent = originalText;
        }, 2000);
      });
    } else {
      // Fallback for older browsers
      const textarea = document.createElement('textarea');
      textarea.value = text;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);
      
      btn.textContent = 'âœ… Disalin!';
      setTimeout(() => {
        btn.textContent = originalText;
      }, 2000);
    }
  }
  
  // Initialize tool
  function init() {
    const toolContainer = document.querySelector('.ilm-quran-tool');
    toolContainer.innerHTML = buildToolHTML();
    
    // Render initial surah
    setTimeout(() => {
      renderVerses(112);
    }, 500);
    
    // Surah selector
    document.getElementById('surahSelector').addEventListener('change', function() {
      const surahId = parseInt(this.value);
      renderVerses(surahId);
    });
    
    // Dark mode toggle
    document.getElementById('darkModeToggle').addEventListener('click', function() {
      const tool = document.getElementById('ilmQuranTool');
      tool.classList.toggle('dark-mode');
      darkMode = !darkMode;
      this.textContent = darkMode ? 'â˜€ï¸ Light' : 'ğŸŒ™ Dark';
    });
    
    // Share button
    document.getElementById('shareBtn').addEventListener('click', function() {
      const url = window.location.href;
      const text = 'Baca dan dengar Surah Pendek dengan alat interaktif terbaik di IlmuAlam!';
      
      if (navigator.share) {
        navigator.share({
          title: 'Surah Pendek - IlmuAlam',
          text: text,
          url: url
        });
      } else {
        // Fallback: Copy link
        copyToClipboard(url, this);
      }
    });
  }
  
  // Wait for DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
  
  // Encoded copyright
  const _c = atob('wqkgMjAyNSBJbG11QWxhbS5jb20gLSBBbGwgUmlnaHRzIFJlc2VydmVk');
  
})();
